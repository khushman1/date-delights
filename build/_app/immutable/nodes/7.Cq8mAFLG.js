var Pt=t=>{throw TypeError(t)};var zt=(t,e,n)=>e.has(t)||Pt("Cannot "+n);var dt=(t,e,n)=>(zt(t,e,"read from private field"),n?n.call(t):e.get(t)),ut=(t,e,n)=>e.has(t)?Pt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ft=(t,e,n,i)=>(zt(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n);import{o as ce,j as de,t as L,f as ue,h as fe,a as g,s as V,e as rt,d as St}from"../chunks/D81WNcHP.js";import{B as ve,i as Xt,C as Yt,l as me,aC as pe,M as it,aD as be,k as r,K as ye,ag as he,p as ge,af as _e,e as xe,s as M,f as X,t as J,a as we,aE as ke,$ as je,c as H,m as w,r as S}from"../chunks/DZdI0-5K.js";import{i as I}from"../chunks/CqqHDylx.js";import{e as st,a as Y,r as Ae,b as Et,i as Mt,s as Wt,c as Pe}from"../chunks/rK2lQniF.js";import{t as ze,f as Se}from"../chunks/CBbhN1qC.js";import{p as Ee,a as gt}from"../chunks/Bwq92sPi.js";import{i as Me,a as We,b as Le,c as Ue}from"../chunks/CpVsQg6O.js";function Lt(t,e,n){ve(()=>{var i=Xt(()=>e(t,n==null?void 0:n())||{});if(n&&(i!=null&&i.update)){var o=!1,v={};Yt(()=>{var u=n();me(u),o&&pe(v,u)&&(v=u,i.update(u))}),o=!0}if(i!=null&&i.destroy)return()=>i.destroy()})}function Ce(t){it(t,t.v+1)}function He(t){let e=0,n=ye(0),i;return()=>{be()&&(r(n),Yt(()=>(e===0&&(i=Xt(()=>t(()=>Ce(n)))),e+=1,()=>{he().then(()=>{e-=1,e===0&&(i==null||i(),i=void 0)})})))}}function Te(t){const e=JSON.parse(t);return e.data&&(e.data=Le(e.data,Ue.decoders)),e}function vt(t){return HTMLElement.prototype.cloneNode.call(t)}function mt(t,e=()=>{}){const n=async({action:o,result:v,reset:u=!0,invalidateAll:m=!0})=>{v.type==="success"&&(u&&HTMLFormElement.prototype.reset.call(t),m&&await Me()),(location.origin+location.pathname===o.origin+o.pathname||v.type==="redirect"||v.type==="error")&&await We(v)};async function i(o){var F,O,C,q,d;if(((F=o.submitter)!=null&&F.hasAttribute("formmethod")?o.submitter.formMethod:vt(t).method)!=="post")return;o.preventDefault();const u=new URL((O=o.submitter)!=null&&O.hasAttribute("formaction")?o.submitter.formAction:vt(t).action),m=(C=o.submitter)!=null&&C.hasAttribute("formenctype")?o.submitter.formEnctype:vt(t).enctype,_=new FormData(t),T=(q=o.submitter)==null?void 0:q.getAttribute("name");T&&_.append(T,((d=o.submitter)==null?void 0:d.getAttribute("value"))??"");const N=new AbortController;let D=!1;const j=await e({action:u,cancel:()=>D=!0,controller:N,formData:_,formElement:t,submitter:o.submitter})??n;if(D)return;let x;try{const l=new Headers({accept:"application/json","x-sveltekit-action":"true"});m!=="multipart/form-data"&&l.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(m)?m:"application/x-www-form-urlencoded");const A=m==="multipart/form-data"?_:new URLSearchParams(_),s=await fetch(u,{method:"POST",headers:l,cache:"no-store",body:A,signal:N.signal});x=Te(await s.text()),x.type==="error"&&(x.status=s.status)}catch(l){if((l==null?void 0:l.name)==="AbortError")return;x={type:"error",error:l}}await j({action:u,formData:_,formElement:t,update:l=>n({action:u,result:x,reset:l==null?void 0:l.reset,invalidateAll:l==null?void 0:l.invalidateAll}),result:x})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",i),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",i)}}}var Ut="mz3PUW_p",Ct=["#FFC700","#FF0000","#2E3191","#41BBC7"],Ht=3500,Tt=.5,Dt=150,Ft="mix",Nt=12,Ot="",qt=!0,Bt=800,Jt=1600;function pt(t,e={}){let{colors:n=Ct,duration:i=Ht,force:o=Tt,particleCount:v=Dt,particleShape:u=Ft,particleSize:m=Nt,particleClass:_=Ot,destroyAfterDone:T=qt,stageHeight:N=Bt,stageWidth:D=Jt}=e;(function(d){if(document.querySelector("style[data-neoconfetti]"))return;const l=bt("style");l.dataset.neoconfetti="",l.textContent=d,yt(document.head,l)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),t.classList.add("mz3PUW_c"),t.style.setProperty("--sh",N+"px");let U=[],j=[];const x=()=>Z(W()*(qe-1)),F=(d,l)=>u!=="rectangles"&&(d==="circles"||Be(l));function O(d,l){const A=x(),s=F(u,A),a=(p,h)=>d.style.setProperty(p,h+"");a("--xlp",ht(nt(Qt(l,90)-180),0,180,-D/2,D/2)+"px"),a("--dc",i-Z(1e3*W())+"ms");const c=W()<Fe?Q(W()*Ne,2):0;a("--x1",c),a("--x2",-1*c),a("--x3",c),a("--x4",Q(nt(ht(nt(Qt(l,90)-180),0,180,-1,1)),4)),a("--y1",Q(W()*Rt,4)),a("--y2",Q(W()*o*(Zt()?1:-1),4)),a("--y3",Rt),a("--y4",Q(Oe(ht(nt(l-180),0,180,o,-o),0),4)),a("--w",(s?m:Z(4*W())+m/2)+"px"),a("--h",(s?m:Z(2*W())+m)+"px");const f=A.toString(2).padStart(3,"0").split("");a("--hr",f.map(p=>+p/2+"").join(" ")),a("--r",f.join(" ")),a("--rd",Q(W()*(De-Kt)+Kt)+"ms"),a("--br",s?"50%":0)}let C;function q(){t.innerHTML="",clearTimeout(C),U=It(v,n),j=function(d,l=[],A){const s=[];for(const{color:a}of l){const c=bt("div");c.className=`${Ut} ${A}`,c.style.setProperty("--bgc",a);const f=bt("div");yt(c,f),yt(d,c),s.push(c)}return s}(t,U,_);for(const[d,l]of Gt(j))O(l,U[+d].degree);C=setTimeout(()=>{T&&(t.innerHTML="")},i)}return q(),{update(d){const l=d.particleCount??Dt,A=d.particleShape??Ft,s=d.particleSize??Nt,a=d.particleClass??Ot,c=d.colors??Ct,f=d.stageHeight??Bt,p=d.duration??Ht,h=d.force??Tt,b=d.stageWidth??Jt,E=d.destroyAfterDone??qt;U=It(l,c);let P=!1;if(l===v){j=Array.from(t.querySelectorAll(`.${Ut}`));for(const[B,{color:k}]of Gt(U)){const y=j[+B];JSON.stringify(n)!==JSON.stringify(c)&&y.style.setProperty("--bgc",k),A!==u&&y.style.setProperty("--br",F(A,x())?"50%":"0"),a!==_&&(_&&y.classList.remove(_),a&&y.classList.add(a))}}else P=!0;T&&!E&&clearTimeout(C),t.style.setProperty("--sh",f+"px"),i=p,n=c,o=h,v=l,u=A,m=s,_=a,T=E,N=f,D=b,P&&q()},destroy(){t.innerHTML="",clearTimeout(C)}}}var Kt=200,De=800,Fe=.1,Ne=.3,Rt=.5,nt=Math.abs,W=Math.random,Z=Math.round,Oe=Math.max,bt=t=>document.createElement(t),yt=(t,e)=>t.appendChild(e),It=(t,e)=>Array.from({length:t},(n,i)=>({color:e[i%e.length],degree:360*i/t})),Q=(t,e=2)=>Z((t+Number.EPSILON)*10**e)/10**e,ht=(t,e,n,i,o)=>(t-e)*(o-i)/(n-e)+i,Qt=(t,e)=>t+e>360?t+e-360:t+e,Zt=()=>W()>.5,Gt=Object.entries,qe=6,Be=t=>t!==1&&Zt(),$,tt;class Je{constructor(e,n){ut(this,$);ut(this,tt);ft(this,$,e),ft(this,tt,He(n))}get current(){return dt(this,tt).call(this),dt(this,$).call(this)}}$=new WeakMap,tt=new WeakMap;const Ke=/\(.+\)/;class Re extends Je{constructor(e,n){let i=Ke.test(e)?e:`(${e})`;const o=window.matchMedia(i);super(()=>o.matches,v=>ce(o,"change",v))}}function Vt(t,e,n){var o;t.preventDefault();const i=t.target.getAttribute("data-key");i==="backspace"?(it(e,gt(r(e).slice(0,-1))),(o=n())!=null&&o.badGuess&&n(n().badGuess=!1,!0)):r(e).length<5&&it(e,r(e)+i)}var Ie=L('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l">'),Qe=L('<div> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"></div>'),Ge=L('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div></div>',1),Ve=L('<p class="svelte-1pg2j5l"> </p>'),Xe=L('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),Ye=L('<button formaction="?/update" name="key"> </button>'),Ze=L('<div class="row svelte-1pg2j5l"></div>'),$e=L('<div class="keyboard svelte-1pg2j5l"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),ta=L('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),ea=L('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function da(t,e){ge(e,!0);let n=Ee(e,"form",15);const i=new Re("(prefers-reduced-motion: reduce)");let o=w(()=>e.data.answers.at(-1)==="xxxxx"),v=w(()=>r(o)?-1:e.data.answers.length),u=_e(gt(e.data.guesses[r(v)]||""));xe(()=>{it(u,gt(e.data.guesses[r(v)]||""))});let m=w(()=>r(u).length===5);const _=w(()=>{let s={},a={};return e.data.answers.forEach((c,f)=>{const p=e.data.guesses[f];for(let h=0;h<5;h+=1){const b=p[h];c[h]==="x"?(s[b]="exact",a[b]="correct"):s[b]||(s[b]=c[h]==="c"?"close":"missing",a[b]=c[h]==="c"?"present":"absent")}}),{classnames:s,description:a}}),T=w(()=>r(_).classnames),N=w(()=>r(_).description);function D(s){var a;s.metaKey||s.key==="Enter"&&!r(m)||(a=document.querySelector(`[data-key="${s.key}" i]`))==null||a.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var U=ea();ue("keydown",ke,D),fe(s=>{var a=Ie();je.title="Sverdle",g(s,a)});var j=M(X(U),2),x=M(H(j),2);let F;st(x,20,()=>Array.from(Array(6).keys()),s=>s,(s,a)=>{var c=Ge();const f=w(()=>a===r(v));var p=X(c),h=H(p);S(p);var b=M(p,2);let E;st(b,20,()=>Array.from(Array(5).keys()),P=>P,(P,B)=>{var k=Qe();const y=w(()=>r(f)?r(u):e.data.guesses[a]),G=w(()=>{var z;return(z=e.data.answers[a])==null?void 0:z[B]}),_t=w(()=>{var z;return((z=r(y))==null?void 0:z[B])??""}),$t=w(()=>r(f)&&B===r(y).length),xt=w(()=>r(G)==="x"),wt=w(()=>r(G)==="c"),kt=w(()=>r(G)==="_");let jt;var At=H(k),ot=M(At),te=H(ot);{var ee=z=>{var et=rt("(correct)");g(z,et)},ae=z=>{var et=St(),re=X(et);{var se=K=>{var at=rt("(present)");g(K,at)},ne=K=>{var at=St(),ie=X(at);{var oe=R=>{var ct=rt("(absent)");g(R,ct)},le=R=>{var ct=rt("empty");g(R,ct)};I(ie,R=>{r(kt)?R(oe):R(le,!1)},!0)}g(K,at)};I(re,K=>{r(wt)?K(se):K(ne,!1)},!0)}g(z,et)};I(te,z=>{r(xt)?z(ee):z(ae,!1)})}S(ot);var lt=M(ot,2);Ae(lt),S(k),J(()=>{jt=Y(k,1,"letter svelte-1pg2j5l",null,jt,{exact:r(xt),close:r(wt),missing:r(kt),selected:r($t)}),V(At,`${r(_t)??""} `),lt.disabled=!r(f),Et(lt,r(_t))}),g(P,k)}),S(b),J(()=>{V(h,`Row ${a+1}`),E=Y(b,1,"row svelte-1pg2j5l",null,E,{current:r(f)})}),g(s,c)}),S(x);var O=M(x,2),C=H(O);{var q=s=>{var a=Xe(),c=X(a);{var f=b=>{var E=Ve(),P=H(E);S(E),J(()=>V(P,`the answer was "${e.data.answer??""}"`)),g(b,E)};I(c,b=>{!r(o)&&e.data.answer&&b(f)})}var p=M(c,2),h=H(p);S(p),J(()=>V(h,`${(r(o)?"you won :)":"game over :(")??""} play again?`)),g(s,a)},d=s=>{var a=$e(),c=H(a);let f;var p=M(c,2);p.__click=[Vt,u,n];var h=M(p,2);st(h,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],Mt,(b,E)=>{var P=Ze();st(P,21,()=>E,Mt,(B,k)=>{var y=Ye();y.__click=[Vt,u,n];var G=H(y,!0);S(y),J(()=>{Wt(y,"data-key",r(k)),Y(y,1,Pe(r(T)[r(k)]),"svelte-1pg2j5l"),y.disabled=r(m),Et(y,r(k)),Wt(y,"aria-label",`${r(k)??""} ${r(N)[r(k)]||""}`),V(G,r(k))}),g(B,y)}),S(P),g(b,P)}),S(a),J(()=>{c.disabled=!r(m),f=Y(c,1,"svelte-1pg2j5l",null,f,{selected:r(m)})}),g(s,a)};I(C,s=>{r(o)||e.data.answers.length>=6?s(q):s(d,!1)})}S(O),S(j),Lt(j,(s,a)=>mt==null?void 0:mt(s,a),()=>()=>({update:s})=>{s({reset:!1})});var l=M(j,2);{var A=s=>{var a=ta();Lt(a,(c,f)=>pt==null?void 0:pt(c,f),()=>({particleCount:i.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),g(s,a)};I(l,s=>{r(o)&&s(A)})}J(()=>{var s;return F=Y(x,1,"grid svelte-1pg2j5l",null,F,{playing:!r(o),"bad-guess":(s=n())==null?void 0:s.badGuess})}),ze(3,j,()=>Se,()=>({duration:500})),g(t,U),we()}de(["click"]);export{da as component};
